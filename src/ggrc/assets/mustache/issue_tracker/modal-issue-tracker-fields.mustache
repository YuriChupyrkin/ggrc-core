{{!
  Copyright (C) 2017 Google Inc.
  Licensed under http://www.apache.org/licenses/LICENSE-2.0 <see LICENSE file>
}}

<div class="ggrc-form-item">
  <div class="ggrc-form-item__multiple-row">
    <label class="ggrc-form-item__label">
      Buganizer
    </label>
    <div class="ggrc-form-item__small-text">
      <small>
        <em>If turned on, one bug will be created for each assessment.</em>
      </small>
    </div>
    <boolean-dropdown-helper {(dropdown-value)}="instance.issue_tracker.enabled">
      <dropdown options-list="instance.class.issue_tracker_enable_options"
        on-change="@dropdownValueChange"
        name="dropdownValue">
      </dropdown>
    </boolean-dropdown-helper>
  </div>
</div>

{{#if instance.issue_tracker.enabled}}
  <div class="ggrc-form-item">
    <div class="ggrc-form-item__multiple-row">
      <label class="ggrc-form-item__label">
        Hotlist ID
      </label>
      <input data-id="code_txtbx"
        class="input-block-level"
        placeholder="Enter Hotlist ID"
        type="text"
        {($value)}="instance.issue_tracker.hotlist_id"/>
    </div>
    <div class="ggrc-form-item__multiple-row {{#instance.computed_errors.issue_tracker.component_id}}field-failure{{/instance.computed_errors.issue_tracker.component_id}}">
      <label class="form-label required-label ggrc-form-item__label">
        Component ID
        <i class="fa fa-asterisk"></i>
      </label>
      <input data-id="code_txtbx"
        class="input-block-level"
        placeholder="Enter Component ID"
        type="text"
        {($value)}="instance.issue_tracker.component_id"/>
    </div>
    <div class="ggrc-form-item__multiple-row">
      <label class="ggrc-form-item__label">
        Issue Type
      </label>
      <div>
        {{instance.issue_tracker.issue_type}}
      </div>
    </div>
  </div>

  <div class="ggrc-form-item">
    <div class="ggrc-form-item__multiple-row">
      <label class="ggrc-form-item__label">
        Issue Priority
      </label>
      <dropdown
        options-list="instance.class.issue_tracker_priorities"
        name="instance.issue_tracker.issue_priority">
      </dropdown>
    </div>
    <div class="ggrc-form-item__multiple-row">
      <label class="ggrc-form-item__label">
        Issue Severity
      </label>
      <dropdown
        instance="instance"
        options-list="instance.class.issue_tracker_severities"
        name="instance.issue_tracker.issue_severity">
      </dropdown>
    </div>

    {{#if_instance_of instance "Assessment"}}
      <div class="ggrc-form-item__multiple-row {{#instance.computed_errors.issue_tracker.title}}field-failure{{/instance.computed_errors.issue_tracker.title}}">
        <label class="form-label required-label ggrc-form-item__label">
          Issue Title
          <i class="fa fa-asterisk"></i>
        </label>
        <issue-tracker-fields-pre-population
          {instance}="instance"
          {from-value}="instance.title"
          {(to-value)}="instance.issue_tracker.title"
        >
          <input data-id="code_txtbx"
            class="input-block-level"
            placeholder="Enter Issue Title"
            type="text"
            {($value)}="instance.issue_tracker.title"
          />
        </issue-tracker-fields-pre-population>
      </div>
    {{/if}}
  </div>
{{/if}}
